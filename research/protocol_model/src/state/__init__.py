"""State management for the protocol""" 